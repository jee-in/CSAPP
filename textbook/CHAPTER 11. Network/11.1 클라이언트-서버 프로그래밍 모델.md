# 11장 네트워크 프로그래밍

네트워크 애플리케이션은 어디에나 있다. 웹을 돌아다닐 때나 이메일 메시지를 전송할 때나 온라인 게임을 할 때나 당신은 네트워크 애플리케이션을 이용하고 있다. 흥미롭게도, 모든 네트워크 애플리케이션은 같은 기본 프로그래밍 모델에 기반을 두고 있고, 비슷한 논리 구조를 가지고 있고, 같은 프로그래밍 인터페이스에 의존하고 있다.  

네트워크 애플리케이션은 당신이 시스템을 공부할 때 이미 배웠던 개념들에 의존하고 있다. 예를 들어, 프로세스, 시그널, 바이트 정렬, 메모리 매핑, 동적 스토리지 할당은 모두 네트워크 애플리케이션에서 중요한 역할을 한다. 새롭게 배워야 할 개념들도 있다. 당신은 기본적인 클라이언트-서버 프로그래밍 모델을 이해해야 할 것이고, 인터넷에 의해 제공되는 서비스를 사용하는 클라이언트-서버 프로그램을 작성하는 방법을 배워야 한다. 마지막에는 웹 브라우저에 텍스트와 그래픽이 있는 동적 콘텐츠와 정적 콘텐츠 모두를 서비스하는, 작지만 기능적인 웹 서버를 개발하면서 이 모든 개념들을 하나로 종합할 것이다.  

## 11.1 클라이언트 서버 프로그래밍 모델

모든 네트워크 애플리케이션은 클라이언트-서버 모델에 기반을 두고 있다. 이 모델에서, 애플리케이션은 서버 프로세스와 하나 이상의 클라이언트 프로세스로 이루어져 있다. 서버는 리소스를 관리하고, 리소스를 조작함으로써 클라이언트를 위해  서비스를 제공한다. 예를 들어, 웹 서버는 클라이언트를 위해서 자신이 회수하고 실행시킬 디스크 파일들을 관리한다. FTP 서버는 클라이언트를 위해 자신이 저장하고 회수하는 디스크 파일들을 관리한다. 비슷하게, 이메일 서버는 클라이언트를 위해 자신이 읽고 업데이트할 spool 파일들을 관리한다.  

클라이언트-서버 모델에서 기초적인 작동은 트랜잭션 transaction이다. 클라이언트-서버 트랜잭션은 4개의 단계로 이루어져 있다.  

1. 클라이언트가 서비스가 필요할 때, 클라이언트는 서버에게 요청 request를 보냄으로써 거래를 시작한다. 예를 들어, 웹 브라우저가 파일이 필요할 때, 웹 브라우저는 웹 서버에게 요청을 보낸다.
2. 서버가 요청을 받고, 요청을 해석하고, 적절한 방법으로 자신의 리소스를 조작한다. 예를 들어, 웹 서버가 브라우저로부터 요청을 받았을 때, 웹 서버는 디스크 파일을 읽는다.
3. 서버는 클라이언트에게 응답 response을 보내고 다음 요청을 기다린다. 예를 들어, 웹 서버는 클라이언트에게 파일을 보낸다.
4. 클라이언트는 응답을 받고 응답을 조작한다. 예를 들어, 웹 브라우저가 서버로부터 페이지를 응답받으면 그것을 스크린에 나타낸다.

> 클라이언트-서버 트랜잭션 VS 데이터베이스 트랜잭션
클라이언트-서버 트랜잭션은 데이터베이스 트랜잭션이 아니고, 그것과 어떤 속성(예를 들면, 원자성 atomicity)도 공유하지 않는다. 우리의 맥락에서 트랜잭션은 단순히 클라이언트와 서버에 의해 수행되는 여러 단계들을 지칭하는 것이다.

클라이언트와 서버 프로세스는 머신이나 호스트로 불리기도 하지만 이는 사실이 아니다. 단일 호스트는 많은 다양한 클라이언트와 서버를 동시에 실행시킬 수 있고, 클라이언트와 서버 트랜잭션은 같거 호스트에 있을 수도 있고 다른 호스트에 있을 수도 있다. 클라이언트-서버 모델은 클라이언트와 서버가 호스트에 어떻게 매핑되었는지와 관계없이 항상 동일하다.